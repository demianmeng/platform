Alib.apply(Alib.FormUtil,{toggleHtml:function(a){jQuery.each(a,function(b,c){jQuery(c[0]).click(function(){jQuery(c[2]).addClass("d-n")});jQuery(c[1]).click(function(){jQuery(c[2]).removeClass("d-n")})})},toggleInputTip:function(a){jQuery(a).each(function(c,f){var d=jQuery(f);var e=d.siblings(".fm-ipt-tip");var b=function(){if(d.val().trim().isBlank()){e.removeClass("d-n")}else{e.addClass("d-n")}};e.click(function(){d.focus()});d.focus(function(){e.addClass("d-n")}).blur(function(){b()});b()})},clsIpt:"fm-ipt-error",clsTip:"fm-tip-error",getTipField:function(b){if(Alib.isString(b)){b=jQuery(b)}var a=b.siblings(".fm-tip");return a.size()==1?a:b.parent().siblings(".fm-tip")},tipHandle:function(e,c,d){var g=this.clsIpt,a=this.clsTip,f=this.getTipField,b=null;if(Alib.isArray(e)){jQuery.each(e,function(h,j){if(Alib.isString(j)){j=jQuery(j)}d?j.removeClass(g):j.addClass(g);if(!b){b=f(j)}})}else{if(Alib.isString(e)){e=jQuery(e)}d?e.removeClass(g):e.addClass(g);b=f(e)}b.html(c);d?b.removeClass(a):b.addClass(a)},validateForm:function(d,c){var c=c||this,g=c.clsIpt,a=c.clsTip,f=c.getTipField,e=true,b=null;jQuery.each(d,function(i,h){var j=jQuery(h.id);if(j.size()==0){return}if(j.attr("type")!="radio"){j.removeClass(g)}f(j).removeClass(a).html(h.defaultTip);if(h.validate&&Alib.isString(h.validate())){e=false;if(!b){b=j}}});if(e){return true}if(b){b.focus();b.blur()}return false},bindEvent:function(c){var f=this.clsIpt,a=this.clsTip,e=this.getTipField,d=this.validateForm,b=this;jQuery.each(c,function(j,g){var k=jQuery(g.id);if(k.size()==0){return}if(g.validate){var i=g.eventType;if(Alib.isString(i)&&i.isNotBlank()){k.bind(i,function(){g.validate()})}else{if(Alib.isArray(i)){jQuery.each(i,function(m,l){k.bind(l,function(){g.validate()})})}}}k.focus(function(){if(k.attr("type")!="radio"){k.addClass("fm-ipt-focus");k.removeClass(f)}e(k).removeClass(a).html(g.defaultTip);jQuery(".fm-item-highlight").removeClass("fm-item-highlight");k.parent(".fm-item").first().addClass("fm-item-highlight")}).blur(function(){k.removeClass("fm-ipt-focus")});if(k.attr("type")=="radio"){k.click(function(){e(k).removeClass(a).html(g.defaultTip)})}var h=e(k);if(g.initError&&g.initError.isNotBlank()){k.addClass(f);e(k).addClass(a).html(g.initError)}else{if(!h.hasClass(a)){h.html(g.defaultTip)}}});jQuery("#main-form").submit(function(){if(jQuery("#form-submit").hasClass("btn-main-disabled")){return false}if(d(c,b)){jQuery("#form-submit").addClass("btn-main-disabled");return true}return false});jQuery("#form-submit").click(function(){jQuery("#main-form").submit();return false})}});jQuery(function(){jQuery(".fm-item").click(function(){jQuery(".fm-item-highlight").removeClass("fm-item-highlight");jQuery(this).addClass("fm-item-highlight")});jQuery(".fm-combo").change(function(){jQuery(this).parent().focus()});jQuery(".fm-group-hd > .tool > a").each(function(a,b){jQuery(b).click(function(){var c=jQuery(this).html().trim();if(c=="展开"){jQuery(this).html("收起")}else{jQuery(this).html("展开")}jQuery(this).parent().toggleClass("tool-collapse");jQuery(this).parent().parent().next(".fm-group-bd").first().toggle(200)})})});