(function(){String.prototype.isEmpty=function(){if(this==undefined||this==""||this==null){return true}return false};String.prototype.isNotEmpty=function(){return !this.isEmpty()};String.prototype.isBlank=function(){if(this==undefined||this==""||this==null||/^\s*$/.test(this)){return true}return false};String.prototype.isNotBlank=function(){return !this.isBlank()};String.prototype.trim=function(){if(this.isEmpty()){return this}return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.charLength=function(){var a=this.replace(/[^x00-xff]/mg,"JJ");return a.length};String.prototype.include=function(a){return this.indexOf(a)>-1};String.prototype.startsWith=function(a){return this.indexOf(a)===0};String.prototype.endsWith=function(b){var a=this.length-b.length;return a>=0&&this.lastIndexOf(b)===a}})();var Alib={$:function(){var b=new Array();for(var a=0;a<arguments.length;a++){var c=arguments[a];if(typeof c=="string"){c=document.getElementById(c)}if(arguments.length==1){return c}b.push(c)}return b},$a:function(b){if(!b){return[]}if(b.toArray){return b.toArray()}var a=b.length||0,c=new Array(a);while(a--){c[a]=b[a]}return c},toInt:function(a){return parseInt(a,10)||0},isObject:function(a){return a&&typeof a=="object"},isElement:function(a){return !!(a&&a.nodeType==1)},isArray:function(a){return a!=null&&typeof a=="object"&&"splice" in a&&"join" in a},isFunction:function(a){return typeof a=="function"},isString:function(a){return typeof a=="string"},isNumber:function(a){return typeof a=="number"},isDate:function(a){return a&&typeof a.getFullYear=="function"},isBoolean:function(a){return typeof a=="boolean"},isUndefined:function(a){return typeof a=="undefined"}};Alib.apply=function(a,c){if(a&&c){for(var b in c){a[b]=c[b]}}return a};Alib.applyIf=function(a,c){if(a&&c){for(var b in c){if(typeof a[b]=="undefined"){a[b]=c[b]}}}return a};Alib.Class={create:function(){var f=null,c=Alib.$a(arguments);if(typeof c[0]=="function"){f=c.shift()}var b=function(){this.init.apply(this,arguments)};b.superclass=f;if(f){var e=function(){};e.prototype=f.prototype;b.prototype=new e()}for(var d=0,a=c.length;d<a;d++){Alib.apply(b.prototype,c[d])}if(!b.prototype.init){b.prototype.init=function(){}}b.prototype.constructor=b;return b}};(function(){var q=navigator.userAgent.toLowerCase(),v=function(e){return e.test(q)},y=document,j=y.compatMode=="CSS1Compat",x=v(/opera/),g=v(/chrome/),r=v(/webkit/),u=!g&&v(/safari/),d=u&&v(/applewebkit\/4/),b=u&&v(/version\/3/),z=u&&v(/version\/4/),p=!x&&v(/msie/),n=p&&v(/msie 7/),m=p&&v(/msie 8/),o=p&&!n&&!m,l=!r&&v(/gecko/),f=l&&v(/rv:1\.8/),a=l&&v(/rv:1\.9/),s=p&&!j,w=v(/windows|win32/),i=v(/macintosh|mac os x/),h=v(/adobeair/),k=v(/linux/),c=/^https/i.test(window.location.protocol);if(o){try{y.execCommand("BackgroundImageCache",false,true)}catch(t){}}Alib.apply(Alib,{iframeSrc:c?"javascript:false":"about:blank",isStrict:j,isSecure:c,isOpera:x,isWebKit:r,isChrome:g,isSafari:u,isSafari3:b,isSafari4:z,isSafari2:d,isIE:p,isIE6:o,isIE7:n,isIE8:m,isGecko:l,isGecko2:f,isGecko3:a,isBorderBox:s,isLinux:k,isWindows:w,isMac:i,isAir:h,removeNode:p?function(){var e;return function(A){if(A&&A.tagName!="BODY"){e=e||y.createElement("div");e.appendChild(A);e.innerHTML=""}}}():function(e){if(e&&e.parentNode&&e.tagName!="BODY"){e.parentNode.removeChild(e)}},getDocScrollLeft:function(){return y.documentElement.scrollLeft||y.body.scrollLeft},getDocScrollTop:function(){return y.documentElement.scrollTop||y.body.scrollTop},getViewportHeight:function(){return j?y.documentElement.clientHeight:y.body.clientHeight},getViewportWidth:function(){return j?y.documentElement.clientWidth:y.body.clientWidth},getDocHeight:function(){return Math.max(j?y.documentElement.scrollHeight:y.body.scrollHeight,this.getViewportHeight())},getDocWidth:function(){return Math.max(j?y.documentElement.scrollWidth:y.body.scrollWidth,this.getViewportWidth())},clearSelection:function(){try{window.getSelection?window.getSelection().removeAllRanges():y.selection.empty()}catch(A){}}})})();Alib.DateUtil={getDiffMonths:function(c,j){var g=0;var d=j;if(c.getTime()>j.getTime()){d=c;c=j}var f=d.getFullYear();var i=d.getMonth()+1;var b=d.getDate();var e=c.getFullYear();var h=c.getMonth()+1;var a=c.getDate();g+=(f*12+i)-(e*12+h);if(b<=a){g-=1}return g},isLeapYear:function(a){return((a%4==0&&a%100!=0)||(a%400==0))?true:false},getDays:function(a,b){switch(b){case 1:case 3:case 5:case 7:case 8:case 10:case 12:days=31;break;case 4:case 6:case 9:case 11:days=30;break;case 2:if(isLeapYear(a)){days=29}else{days=28}break}return days},toDate:function(c){if(!/^\d{4}\-\d\d?\-\d\d?$/.test(c)){return null}var a=c.replace(/\-0/g,"-").split("-");a=[Alib.toInt(a[0]),Alib.toInt(a[1])-1,Alib.toInt(a[2])];var b=new Date(a[0],a[1],a[2]);if(b.getFullYear()!=a[0]||b.getMonth()!=a[1]||b.getDate()!=a[2]){return null}return b}};Alib.FormUtil={setComboVal:function(c,f){c=Alib.isString(c)?Alib.$(c):c;var e=false,a=c.options.length,d;for(var b=0;b<a;b++){d=c.options[b];if(d.value==f){d.setAttribute("selected","selected");e=true}else{d.removeAttribute("selected")}}if(e){c.value=f}},addComboOption:function(b,a,d){var c=document.createElement("option");c.setAttribute("value",d||"");if(a=="请选择"){c.className="fm-val-def"}c.innerHTML=a||"请选择";b.appendChild(c)},writeYears:function(d,a){Alib.addComboOption(d,"请选择","");var c=a.getFullYear()+1;for(var b=1955;b<c;b++){Alib.addComboOption(d,b,b)}},writeMonths:function(b){Alib.addComboOption(b,"请选择","");for(var a=1;a<13;a++){var c=a<10?"0"+a:a;Alib.addComboOption(b,c,c)}},writeDate:function(c,b,d){Alib.addComboOption(c,"请选择","");var f=getDays(Alib.getInt(b),Alib.getInt(d))+1;for(var a=1;a<f;a++){var e=a<10?"0"+a:a;Alib.addComboOption(c,e,e)}},formSubmit:function(d,c){if(!Alib.isObject(d)){throw new Error("字段键值对参数非法！")}c=c||{};var e=c.action||"#",h=c.method||"",g=c.target||"";h=h.toLowerCase()=="get"?"get":"post";var a=document.createElement("form");a.setAttribute("action",e);a.setAttribute("method",h);if(g.isNotBlank()){a.setAttribute("target",g)}for(var b in d){var f=document.createElement("textarea");f.setAttribute("name",b);f.value=d[b];a.appendChild(f)}a.style.display="none";document.body.appendChild(a);a.submit()}};Alib.Validator={isAlpha:function(a){return/^[A-Za-z]+$/.test(a)},isAlphanumeric:function(a){return/^[A-Za-z0-9]+$/.test(a)},isNumeric:function(a){return/^[0-9]+$/.test(a)},isMobilePhone:function(a){return/^[1]\d{10}$/.test(a)},isEmail:function(a){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(a)},isDate:function(a){return Alib.DateUtil.toDate(a)?true:false}};Alib.timer=function(h){var a=h||{},d=a.time||60,c=a.interval||1,f=a.delay,k=a.startFn,g=a.intervalFn,b=a.endFn,j=a.scope||window,i=d;var e=function(){if(i==d){if(k){k.apply(j,[])}}if(i<=0){if(b){b.apply(j,[])}i=d}else{setTimeout(e,c*1000);if(g){g.apply(j,[i,d-i]);i=i-c}}};if(f){setTimeout(e,f)}else{e()}};Alib.dialogbox=function(b){b=Alib.isString(b)?{el:b}:(b||{});var a={el:"dialogbox",width:360,title:"统一用户管理系统"};if(b.type=="simple"){var c=Alib.Class.create({init:function(e){var f;this.closeFn=e.closeFn;f=document.createElement("div");f.className="dialog-box";document.body.appendChild(f);f.style.width=e.width+"px";this.dialogBoxEl=f;f=document.createElement("div");f.className="dialog-box-bd";this.dialogBoxEl.appendChild(f);if(Alib.isString(e.el)){e.el=Alib.$(e.el)}if(e.el){f.appendChild(e.el);e.el.style.display="block"}else{if(e.content){f.innerHTML=e.content}}var d=this;jQuery(window).resize(function(){d.setLocation()}).scroll(function(){d.setLocation()});f=document.createElement("div");f.className="dialog-box-mask";if(Alib.isIE6){f.innerHTML='<iframe class="dialog-box-mask" src="'+Alib.iframeSrc+'"></iframe>'}document.body.appendChild(f);f.style.width=Alib.getDocWidth()+"px";f.style.height=Alib.getDocHeight()+"px";jQuery(window).resize(function(){f.style.width=Alib.getDocWidth()+"px";f.style.height=Alib.getDocHeight()+"px"});this.maskEl=f},show:function(){this.maskEl.style.display="block";this.dialogBoxEl.style.display="block";this.setLocation()},hide:function(){if(this.closeFn){this.closeFn.call(window)}this.maskEl.style.display="none";this.dialogBoxEl.style.display="none"},setLocation:function(){var d=Alib.getViewportWidth()-this.dialogBoxEl.offsetWidth;var e=Alib.getViewportHeight()-this.dialogBoxEl.offsetHeight;d=d>0?d:0;e=e>0?e:0;this.dialogBoxEl.style.left=d/2+Alib.getDocScrollLeft()+"px";this.dialogBoxEl.style.top=e/2+Alib.getDocScrollTop()+"px"}});return new c(Alib.applyIf(b,a))}else{var c=Alib.Class.create({init:function(f){var h,d,g;this.closeFn=f.closeFn;h=document.createElement("div");h.className="dialog-box";document.body.appendChild(h);h.style.width=f.width+"px";this.dialogBoxEl=h;h=document.createElement("div");h.className="dialog-box-inner";this.dialogBoxEl.appendChild(h);this.dialogBoxInnerEl=h;h=document.createElement("div");h.className="dialog-box-hd";this.dialogBoxInnerEl.appendChild(h);this.headerEl=h;g=document.createElement("span");g.className="title";g.innerHTML=f.title;this.headerEl.appendChild(g);this.titleEl=g;d=document.createElement("a");d.setAttribute("href","javascript:void(0);");this.headerEl.appendChild(d);this.closeToolEl=d;g=document.createElement("span");g.className="close";d.appendChild(g);h=document.createElement("div");h.className="dialog-box-bd";this.dialogBoxInnerEl.appendChild(h);if(Alib.isString(f.el)){f.el=Alib.$(f.el)}if(f.el){h.appendChild(f.el);f.el.style.display="block"}else{if(f.content){h.innerHTML=f.content}}var e=this;jQuery(this.closeToolEl).click(function(){e.hide()});jQuery(this.headerEl).mousedown(function(i){e.dragStart(i)});jQuery(window).resize(function(){e.setLocation()}).scroll(function(){e.setLocation()});h=document.createElement("div");h.className="dialog-box-mask";if(Alib.isIE6){h.innerHTML='<iframe class="dialog-box-mask" src="'+Alib.iframeSrc+'"></iframe>'}document.body.appendChild(h);h.style.width=Alib.getDocWidth()+"px";h.style.height=Alib.getDocHeight()+"px";jQuery(window).resize(function(){h.style.width=Alib.getDocWidth()+"px";h.style.height=Alib.getDocHeight()+"px"});this.maskEl=h},setTitle:function(d){this.titleEl.innerHTML=d||""},show:function(){this.maskEl.style.display="block";this.dialogBoxEl.style.display="block";this.setLocation()},hide:function(){if(this.closeFn){this.closeFn.call(window)}this.maskEl.style.display="none";this.dialogBoxEl.style.display="none"},dragStart:function(e){var f=jQuery(this.dialogBoxEl).offset();this.x=e.pageX-f.left;this.y=e.pageY-f.top;var d=this;jQuery(document).mousemove(function(g){d.drag(g)}).mouseup(function(g){d.dragStop(g)});if(this.headerEl.setCapture){this.headerEl.setCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}},drag:function(e){Alib.clearSelection();var d=e.pageX-this.x;var f=e.pageY-this.y;if(d<Alib.getDocWidth()-this.dialogBoxEl.offsetWidth&&d>0){this.dialogBoxEl.style.left=d+"px"}if(f<Alib.getDocHeight()-this.dialogBoxEl.offsetHeight&&f>0){this.dialogBoxEl.style.top=f+"px"}},dragStop:function(d){jQuery(document).unbind("mousemove").unbind("mouseup");if(this.headerEl.releaseCapture){this.headerEl.releaseCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}},setLocation:function(){var d=Alib.getViewportWidth()-this.dialogBoxEl.offsetWidth;var e=Alib.getViewportHeight()-this.dialogBoxEl.offsetHeight;d=d>0?d:0;e=e>0?e:0;this.dialogBoxEl.style.left=d/2+Alib.getDocScrollLeft()+"px";this.dialogBoxEl.style.top=e/2+Alib.getDocScrollTop()+"px"}});return new c(Alib.applyIf(b,a))}};Alib.treeCombo=function(b){var a=Alib.Class.create({dataCache:{},childrenValueCache:{},parentValueCache:{},selectedValue:null,el:"treeCombo",className:"",valueField:"id",textField:"name",initValues:["0"],scope:window,onChangeFn:null,getItemsFn:null,initIndex:0,topValue:"0",init:function(c){if(c){Alib.apply(this,c)}this.topValue=this.initValues[0];this.setItemsSelect(null,null,true)},setItemsSelect:function(l,c,m){var o,p,f,g,n,d,j,c=c||Alib.$(this.el),e=l?l.value:this.topValue;c.innerHTML="";if(e==this.topValue){this.selectedValue=null}else{if(e.indexOf("_PREFIX_")==0){this.selectedValue=e.substring(8,e.length)}else{this.selectedValue=e}}if(l&&this.onChangeFn){this.onChangeFn.apply(this.scope,[this.getSelected(),this.getAllSelected(),m])}if(e.indexOf("_PREFIX_")==0){return}f=this.childrenValueCache[e];if(!f){o=this.getItemsFn.call(this.scope,e)||[];n=o.length;f=new Array(n);for(var h=0;h<n;h++){p=o[h];g=p[this.valueField];f[h]=g;this.dataCache[g]=p;this.parentValueCache[g]=e}this.childrenValueCache[e]=f}if((n=f.length)>0){d=this.createSelect();d.appendChild(this.createSelectOption("_PREFIX_"+e,"请选择",true));for(var h=0;h<n;h++){g=f[h];p=this.dataCache[g];d.appendChild(this.createSelectOption(g,p[this.textField],false))}j=document.createElement("span");c.appendChild(d);c.appendChild(j);var k=this;jQuery(d).change(function(){k.setItemsSelect(d,j)})}if(this.initValues.length>++this.initIndex){jQuery(d).val(this.initValues[this.initIndex]);this.setItemsSelect(d,j,true)}},createSelect:function(){var c=document.createElement("select");c.className=this.className;return c},createSelectOption:function(f,c,e){var d;d=document.createElement("option");d.setAttribute("value",f);if(c=="请选择"){d.className="fm-val-def"}if(e){d.setAttribute("selected","selected")}d.innerHTML=c;return d},getSelected:function(){if(this.selectedValue){return this.dataCache[this.selectedValue]}else{return null}},getAllSelected:function(){var d=[],c=this.selectedValue;if(c&&(c!=this.topValue)){do{d.push(this.dataCache[c])}while((c=this.parentValueCache[c])&&(c!=this.topValue))}return d.reverse()}});return new a(Alib.isString(b)?{el:b}:(b||{}))};